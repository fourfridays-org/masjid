{% extends "base.html" %}
{% load wagtailcore_tags wagtailimages_tags %}
{% block body_class %}{{ self.slug }}{% endblock %}

{% block content %}
    {% if page.hero_image %}
        {% image page.hero_image fill-2400x658-c100 as heroimage %}
        <div class="hero-image">
            <figure>
                <img class="card-img img-fluid" src="{{ heroimage.url }}" alt="{{ page.hero_image.title }}"/>
                {% if page.hero_heading or page.hero_caption %}
                    <figcaption class="p-2 p-md-3">
                        {% if page.hero_heading %}
                            <h2>{{ page.hero_heading }}</h2>
                        {% endif %}
                        {% if page.hero_caption %}
                            <p class="d-none d-sm-block"><small>{{ page.hero_caption }}</small></p>
                        {% endif %}
                    </figcaption>
                {% endif %}
            </figure>
        </div>
    {% else %}
        <h1 class="text-center text-uppercase my-3">{{ page.title }}</h1>
    {% endif %}

    {% for block in page.body %}
        {% if forloop.first %}
            <div class="container">
                <div class="row">
                    <div class="col-12 col-lg-8">
                        {{ block }}
                    </div>

                    <div class="offset-1 offset-lg-0 col-10 col-lg-4 prayer-schedule p-4 my-4">
                        <h2>Prayer Times</h2>
                        <p class="text-center mb-0"><small>{% now "D jS F" %}</small></p>
                        <div class="text-center my-2">
                            <img alt="Divider" src="{% static 'images/dividers-1.png' %}"/>
                        </div>
                        <table class="table table-borderless">
                            <thead>
                                <tr>
                                    <th scope="col"></th>
                                    <th class="text-center" scope="col" colspan="0">Adhan</th>
                                    <th class="text-center" scope="col">Salah</th>
                                </tr>
                            </thead>
                            <tbody>
                                {% for prayer in prayers %}
                                    <tr style="border-bottom: 1px; border-bottom-style: dashed; border-color: #0c9;">
                                        <th style="font-family: 'Dancing Script', cursive; font-size: 1.3rem; color: #31846f;" scope="row">{{ prayer.title|capfirst }}</th>
                                        <td class="text-center w-50" colspan="0">{{ prayer.adhan|date:'h:i a' }}</td>
                                        <td class="text-center w-100">{{ prayer.salah }}</td>
                                    </tr>
                                {% endfor %}
                            </tbody>
                        </table>
                        {% for extra in prayer_extra %}
                            <p>{{ extra.text|richtext }}</p>
                        {% endfor %}
                    </div>
                </div>
            </div>
        {% else %}
            {{ block }}
        {% endif %}
    {% endfor %}
{% endblock %}